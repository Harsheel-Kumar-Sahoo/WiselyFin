<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiselyFin - Learn. Play. Grow Financially.</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            /* Light Theme (Default) */
            --black: #0a0908ff;
            --gunmetal: #22333bff;
            --almond: #eae0d5ff;
            --khaki: #c6ac8fff;
            --walnut-brown: #5e503fff;
            --primary-blue: #0078FF;
            --background: #F3F8FF;
            --gold: #FFD700;
            --text-dark: #0A0A0A;
            --text-light: #FFFFFF;
            --card-bg: #FFFFFF;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --success: #28a745;
            --error: #dc3545;
            --navbar-bg: rgba(255, 255, 255, 0.95);
            --input-bg: #FFFFFF;
        }

        /* Dark Theme */
        [data-theme="dark"] {
            --black: #eae0d5ff;
            --gunmetal: #a0b2bfff;
            --almond: #22333bff;
            --khaki: #5e503fff;
            --walnut-brown: #c6ac8fff;
            --primary-blue: #4d9eff;
            --background: #0a0a0a;
            --gold: #FFD700;
            --text-dark: #FFFFFF;
            --text-light: #0A0A0A;
            --card-bg: #1a1a1a;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            --navbar-bg: rgba(26, 26, 26, 0.95);
            --input-bg: #2d2d2d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text-dark);
            overflow-x: hidden;
            transition: var(--transition);
        }

        .app-container {
            width: 100%;
            min-height: 100vh;
            position: relative;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--card-shadow);
            z-index: 1001;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* Screen Transitions */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            overflow-y: auto;
            padding: 20px;
        }

        .screen.active {
            opacity: 1;
            visibility: visible;
        }

        /* Start Screen */
        .start-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-blue), var(--background));
            text-align: center;
            padding: 20px;
        }

        .logo {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: var(--text-light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: float 3s ease-in-out infinite;
        }

        .tagline {
            font-size: 1.2rem;
            margin-bottom: 40px;
            color: var(--text-light);
            opacity: 0.9;
        }

        .language-selector {
            margin-bottom: 30px;
            width: 200px;
        }

        select {
            width: 100%;
            padding: 12px 16px;
            border-radius: 50px;
            border: none;
            background: var(--input-bg);
            color: var(--text-dark);
            box-shadow: var(--card-shadow);
            font-size: 1rem;
            outline: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn {
            padding: 14px 30px;
            border-radius: 50px;
            border: none;
            background: linear-gradient(to right, var(--primary-blue), #0056cc);
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 120, 255, 0.3);
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 120, 255, 0.4);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-secondary {
            background: linear-gradient(to right, var(--walnut-brown), var(--gunmetal));
        }

        .btn-success {
            background: linear-gradient(to right, var(--success), #1e7e34);
        }

        .btn-logout {
            background: linear-gradient(to right, #dc3545, #c82333);
        }

        .illustration {
            margin-top: 40px;
            max-width: 300px;
            width: 100%;
            height: 200px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 150"><path fill="%23FFFFFF" opacity="0.7" d="M50,50 C70,30 130,30 150,50 C170,70 170,130 150,150 C130,170 70,170 50,150 C30,130 30,70 50,50 Z"/><circle cx="70" cy="70" r="15" fill="%23FFD700"/><circle cx="130" cy="70" r="15" fill="%23FFD700"/><path fill="%230078FF" d="M60,100 C80,80 120,80 140,100 C160,120 160,140 140,160 C120,180 80,180 60,160 C40,140 40,120 60,100 Z"/></svg>') no-repeat center;
            background-size: contain;
        }

        /* Login/Signup Screen */
        .auth-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--background);
        }

        .auth-container {
            display: flex;
            width: 100%;
            max-width: 900px;
            background: var(--card-bg);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            animation: slideUp 0.5s ease;
        }

        .auth-left {
            flex: 1;
            background: linear-gradient(135deg, var(--primary-blue), #0056cc);
            color: white;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .auth-right {
            flex: 1;
            padding: 40px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
        }

        .auth-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            color: var(--text-dark);
        }

        .auth-tab.active {
            border-bottom: 3px solid var(--primary-blue);
            color: var(--primary-blue);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border-radius: 10px;
            border: 1px solid #ddd;
            background: var(--input-bg);
            color: var(--text-dark);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 2px rgba(0, 120, 255, 0.2);
            outline: none;
        }

        .forgot-password {
            text-align: right;
            margin-bottom: 20px;
        }

        .forgot-password a {
            color: var(--primary-blue);
            text-decoration: none;
            font-size: 0.9rem;
        }

        .message {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
            display: none;
        }

        .message.error {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--error);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .message.success {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        /* Dashboard */
        .dashboard-screen {
            background: var(--background);
            padding-bottom: 80px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .greeting {
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            animation: slideDown 0.5s ease;
            flex: 1;
            margin-right: 15px;
        }

        .greeting h1 {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .greeting p {
            color: var(--text-dark);
            opacity: 0.8;
        }

        .dashboard-tabs {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .tab-card {
            display: flex;
            align-items: center;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            animation: slideIn 0.5s ease;
            animation-fill-mode: both;
        }

        .tab-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .tab-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: var(--primary-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.2rem;
        }

        .tab-content {
            flex: 1;
        }

        .tab-content h3 {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-dark);
        }

        .tab-content p {
            color: #666;
            font-size: 0.9rem;
        }

        .tab-arrow {
            color: #999;
            font-size: 1.2rem;
        }

        /* Bottom Navbar */
        .bottom-navbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--navbar-bg);
            backdrop-filter: blur(10px);
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .bottom-navbar.visible {
            opacity: 1;
            visibility: visible;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 5px 10px;
            border-radius: 10px;
            transition: var(--transition);
            cursor: pointer;
            color: #666;
        }

        .nav-item.active {
            color: var(--primary-blue);
        }

        .nav-icon {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }

        .nav-label {
            font-size: 0.7rem;
        }

        /* Section Screens */
        .section-screen {
            background: var(--background);
            padding-bottom: 80px;
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px 0;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            box-shadow: var(--card-shadow);
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-dark);
        }

        .back-btn:hover {
            transform: scale(1.05);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Play & Learn Section */
        .play-learn-tabs {
            display: flex;
            margin-bottom: 20px;
            background: var(--card-bg);
            border-radius: 50px;
            padding: 5px;
            box-shadow: var(--card-shadow);
        }

        .play-learn-tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            color: var(--text-dark);
        }

        .play-learn-tab.active {
            background: var(--primary-blue);
            color: white;
        }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .topic-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            animation: fadeIn 0.5s ease;
        }

        .topic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .topic-thumbnail {
            height: 150px;
            background: linear-gradient(135deg, var(--primary-blue), #0056cc);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .topic-title {
            padding: 15px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .topic-progress {
            padding: 0 15px 15px;
        }

        .progress-bar {
            height: 6px;
            background: #eee;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-blue);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .quiz-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            transition: var(--transition);
            animation: fadeIn 0.5s ease;
        }

        .quiz-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .quiz-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }

        .quiz-content {
            flex: 1;
        }

        .quiz-reward {
            display: flex;
            align-items: center;
            color: var(--gold);
            font-weight: 600;
        }

        /* Content Section */
        .content-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            animation: fadeIn 0.5s ease;
        }

        .content-section h2 {
            margin-bottom: 15px;
            color: var(--primary-blue);
        }

        .content-section p {
            margin-bottom: 15px;
            line-height: 1.6;
            color: var(--text-dark);
        }

        .content-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .content-section li {
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        /* Quiz Section */
        .quiz-container {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            animation: fadeIn 0.5s ease;
        }

        .quiz-question {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: var(--text-dark);
        }

        .quiz-options {
            margin-bottom: 20px;
        }

        .quiz-option {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--input-bg);
            color: var(--text-dark);
        }

        .quiz-option:hover {
            background: var(--primary-blue);
            color: white;
        }

        .quiz-option.selected {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .quiz-result {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .quiz-result.correct {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            color: var(--success);
        }

        .quiz-result.incorrect {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
            color: var(--error);
        }

        /* Wallet Section */
        .balance-card {
            background: linear-gradient(135deg, var(--primary-blue), #0056cc);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            animation: slideDown 0.5s ease;
        }

        .balance-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .balance-icon {
            font-size: 1.8rem;
            margin-right: 10px;
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .history-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            animation: slideUp 0.5s ease;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .history-table th, .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
            color: var(--text-dark);
        }

        .history-table th {
            font-weight: 600;
            color: #666;
        }

        .coin-earned {
            color: var(--gold);
            font-weight: 600;
        }

        /* News Section */
        .news-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            animation: fadeIn 0.5s ease;
        }

        .news-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .news-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: var(--text-dark);
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .news-description {
            margin-bottom: 15px;
            line-height: 1.5;
            color: var(--text-dark);
        }

        /* Leaderboard Section */
        .leaderboard-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            transition: var(--transition);
            animation: slideIn 0.5s ease;
            animation-fill-mode: both;
        }

        .leaderboard-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .rank {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: 600;
        }

        .rank-1 {
            background: var(--gold);
            color: white;
        }

        .rank-2 {
            background: #C0C0C0;
            color: white;
        }

        .rank-3 {
            background: #CD7F32;
            color: white;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-dark);
        }

        .user-coins {
            color: var(--gold);
            font-weight: 600;
        }

        /* Profile Section */
        .profile-header {
            display: flex;
            align-items: center;
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            animation: slideDown 0.5s ease;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), #0056cc);
            margin-right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }

        .profile-info h2 {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-dark);
        }

        .profile-info p {
            color: #666;
        }

        .profile-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--card-shadow);
            animation: slideUp 0.5s ease;
        }

        .profile-card h3 {
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .badges-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .badge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        /* About Us Section */
        .about-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            animation: fadeIn 0.5s ease;
        }

        .about-card h2 {
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .about-card p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .team-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            animation: fadeIn 0.5s ease;
        }

        .team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .team-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-blue), #0056cc);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
        }

        .team-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-dark);
        }

        .team-role {
            color: #666;
            font-size: 0.9rem;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .auth-container {
                flex-direction: column;
            }
            
            .auth-left {
                padding: 30px;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .topic-grid {
                grid-template-columns: 1fr;
            }
            
            .team-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .nav-label {
                display: none;
            }
            
            .nav-icon {
                font-size: 1.4rem;
            }

            .dashboard-header {
                flex-direction: column;
            }

            .greeting {
                margin-right: 0;
                margin-bottom: 15px;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 2rem;
            }
            
            .tagline {
                font-size: 1rem;
            }
            
            .greeting h1 {
                font-size: 1.5rem;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .balance-amount {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Theme Toggle -->
        <div class="theme-toggle" id="theme-toggle">
            <i class="fas fa-moon"></i>
        </div>

        <!-- Start Screen -->
        <div class="screen start-screen active" id="start-screen">
            <h1 class="logo">WiselyFin</h1>
            <p class="tagline">Learn. Play. Grow Financially.</p>
            
            <div class="language-selector">
                <select id="language-select">
                    <option value="en">English</option>
                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                    <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                    <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                    <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                </select>
            </div>
            
            <button class="btn" id="get-started-btn">Get Started</button>
            
            <div class="illustration"></div>
        </div>
        
        <!-- Login/Signup Screen -->
        <div class="screen auth-screen" id="auth-screen">
            <div class="auth-container">
                <div class="auth-left">
                    <h2>Welcome to WiselyFin</h2>
                    <p>Your journey to financial literacy starts here. Learn, play, and grow your financial knowledge with our gamified platform.</p>
                </div>
                
                <div class="auth-right">
                    <div class="auth-tabs">
                        <div class="auth-tab active" data-tab="login">Login</div>
                        <div class="auth-tab" data-tab="signup">Sign Up</div>
                    </div>
                    
                    <div class="auth-form active" id="login-form">
                        <div class="message error" id="login-error"></div>
                        <div class="form-group">
                            <label for="login-email">Email</label>
                            <input type="email" id="login-email" placeholder="Enter your email">
                        </div>
                        
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" placeholder="Enter your password">
                        </div>
                        
                        <div class="forgot-password">
                            <a href="#" id="forgot-password-link">Forgot Password?</a>
                        </div>
                        
                        <button class="btn" id="login-btn" style="width: 100%;">Login</button>
                    </div>
                    
                    <div class="auth-form" id="signup-form">
                        <div class="message error" id="signup-error"></div>
                        <div class="message success" id="signup-success"></div>
                        <div class="form-group">
                            <label for="signup-name">Full Name</label>
                            <input type="text" id="signup-name" placeholder="Enter your full name">
                        </div>
                        
                        <div class="form-group">
                            <label for="signup-email">Email</label>
                            <input type="email" id="signup-email" placeholder="Enter your email">
                        </div>
                        
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" placeholder="Create a password">
                        </div>
                        
                        <div class="form-group">
                            <label for="signup-confirm">Confirm Password</label>
                            <input type="password" id="signup-confirm" placeholder="Confirm your password">
                        </div>
                        
                        <button class="btn" id="signup-btn" style="width: 100%;">Create Account</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Dashboard Screen -->
        <div class="screen dashboard-screen" id="dashboard-screen">
            <div class="dashboard-header">
                <div class="greeting">
                    <h1 id="user-greeting">Hi User üëã</h1>
                    <p>Ready to boost your financial knowledge today?</p>
                </div>
                <button class="btn btn-logout" id="dashboard-logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            
            <div class="dashboard-tabs">
                <div class="tab-card" data-section="play-learn">
                    <div class="tab-icon"><i class="fas fa-gamepad"></i></div>
                    <div class="tab-content">
                        <h3>Play & Learn</h3>
                        <p>Interactive lessons and quizzes</p>
                    </div>
                    <div class="tab-arrow">‚Üí</div>
                </div>
                
                <div class="tab-card" data-section="wallet">
                    <div class="tab-icon"><i class="fas fa-wallet"></i></div>
                    <div class="tab-content">
                        <h3>Wallet</h3>
                        <p>Track your FinCoin earnings</p>
                    </div>
                    <div class="tab-arrow">‚Üí</div>
                </div>
                
                <div class="tab-card" data-section="news">
                    <div class="tab-icon"><i class="fas fa-newspaper"></i></div>
                    <div class="tab-content">
                        <h3>News</h3>
                        <p>Latest financial updates</p>
                    </div>
                    <div class="tab-arrow">‚Üí</div>
                </div>
                
                <div class="tab-card" data-section="leaderboard">
                    <div class="tab-icon"><i class="fas fa-trophy"></i></div>
                    <div class="tab-content">
                        <h3>Leaderboard</h3>
                        <p>See how you rank</p>
                    </div>
                    <div class="tab-arrow">‚Üí</div>
                </div>
                
                <div class="tab-card" data-section="profile">
                    <div class="tab-icon"><i class="fas fa-user"></i></div>
                    <div class="tab-content">
                        <h3>Profile</h3>
                        <p>Your achievements and info</p>
                    </div>
                    <div class="tab-arrow">‚Üí</div>
                </div>
                
                <div class="tab-card" data-section="about">
                    <div class="tab-icon"><i class="fas fa-info-circle"></i></div>
                    <div class="tab-content">
                        <h3>About Us</h3>
                        <p>Learn more about WiselyFin</p>
                    </div>
                    <div class="tab-arrow">‚Üí</div>
                </div>
            </div>
        </div>
        
        <!-- Section Screens -->
        
        <!-- Play & Learn Section -->
        <div class="screen section-screen" id="play-learn-screen">
            <div class="section-header">
                <div class="back-btn"><i class="fas fa-arrow-left"></i></div>
                <h2 class="section-title">Play & Learn</h2>
            </div>
            
            <div class="play-learn-tabs">
                <div class="play-learn-tab active" data-subsection="learn">Learn</div>
                <div class="play-learn-tab" data-subsection="play">Play</div>
            </div>
            
            <div class="subsection active" id="learn-subsection">
                <div id="courses-container">
                    <!-- Courses will be loaded from Firestore -->
                </div>
            </div>
            
            <div class="subsection" id="play-subsection">
                <div id="quizzes-container">
                    <!-- Quizzes will be loaded from Firestore -->
                </div>
            </div>
        </div>
        
        <!-- Wallet Section -->
        <div class="screen section-screen" id="wallet-screen">
            <div class="section-header">
                <div class="back-btn"><i class="fas fa-arrow-left"></i></div>
                <h2 class="section-title">Your Wallet</h2>
            </div>
            
            <div class="balance-card">
                <div class="balance-header">
                    <div class="balance-icon"><i class="fas fa-coins"></i></div>
                    <h3>FinCoin Balance</h3>
                </div>
                <div class="balance-amount" id="user-balance">0</div>
            </div>
            
            <div class="history-card">
                <h3>Earning History</h3>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Task</th>
                            <th>Coins</th>
                        </tr>
                    </thead>
                    <tbody id="transaction-history">
                        <!-- Transactions will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <button class="btn" id="redeem-btn" style="width: 100%; margin-top: 20px;">Redeem Coins (Coming Soon)</button>
        </div>
        
        <!-- News Section -->
        <div class="screen section-screen" id="news-screen">
            <div class="section-header">
                <div class="back-btn"><i class="fas fa-arrow-left"></i></div>
                <h2 class="section-title">Financial News</h2>
            </div>
            
            <div id="news-container">
                <!-- News will be loaded from Firestore -->
            </div>
        </div>
        
        <!-- Leaderboard Section -->
        <div class="screen section-screen" id="leaderboard-screen">
            <div class="section-header">
                <div class="back-btn"><i class="fas fa-arrow-left"></i></div>
                <h2 class="section-title">Leaderboard</h2>
            </div>
            
            <div id="leaderboard-container">
                <!-- Leaderboard will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Profile Section -->
        <div class="screen section-screen" id="profile-screen">
            <div class="section-header">
                <div class="back-btn"><i class="fas fa-arrow-left"></i></div>
                <h2 class="section-title">Your Profile</h2>
            </div>
            
            <div class="profile-header">
                <div class="profile-avatar" id="profile-avatar">U</div>
                <div class="profile-info">
                    <h2 id="profile-name">User</h2>
                    <p id="profile-role">Member</p>
                </div>
            </div>
            
            <div class="profile-card">
                <h3>Personal Information</h3>
                <div class="info-item">
                    <span>Name</span>
                    <span id="info-name">User</span>
                </div>
                <div class="info-item">
                    <span>Email</span>
                    <span id="info-email">user@wiselyfin.com</span>
                </div>
                <div class="info-item">
                    <span>Role</span>
                    <span id="info-role">User</span>
                </div>
                <div class="info-item">
                    <span>Member Since</span>
                    <span id="info-join">November 2023</span>
                </div>
            </div>
            
            <div class="profile-card">
                <h3>Learning Progress</h3>
                <div class="info-item">
                    <span>Courses Completed</span>
                    <span id="info-courses">0</span>
                </div>
                <div class="info-item">
                    <span>Quizzes Taken</span>
                    <span id="info-quizzes">0</span>
                </div>
                <div class="info-item">
                    <span>Current Streak</span>
                    <span id="info-streak">0 days</span>
                </div>
                <div class="info-item">
                    <span>Total FinCoins</span>
                    <span id="info-coins">0 ü™ô</span>
                </div>
            </div>
            
            <div class="profile-card">
                <h3>Badges Earned</h3>
                <div class="badges-container" id="badges-container">
                    <!-- Badges will be populated by JavaScript -->
                </div>
            </div>
            
            <button class="btn btn-secondary" id="logout-btn" style="width: 100%; margin-top: 20px;">Logout</button>
        </div>
        
        <!-- About Us Section -->
        <div class="screen section-screen" id="about-screen">
            <div class="section-header">
                <div class="back-btn"><i class="fas fa-arrow-left"></i></div>
                <h2 class="section-title">About Us</h2>
            </div>
            
            <div class="about-card">
                <h2>Our Mission</h2>
                <p>WiselyFin is dedicated to making financial literacy accessible, engaging, and effective for everyone. Through our gamified learning platform, we transform complex financial concepts into simple, interactive lessons that empower users to make informed financial decisions.</p>
                
                <h2>Our Vision</h2>
                <p>We envision a financially literate India where every citizen has the knowledge and confidence to manage their finances effectively, plan for the future, and contribute to the nation's economic growth.</p>
            </div>
            
            <div class="about-card">
                <h2>Meet Our Team</h2>
                <div class="team-grid">
                    <div class="team-card">
                        <div class="team-avatar">H</div>
                        <div class="team-name">Harsheel Sahoo</div>
                        <div class="team-role">UX Developer</div>
                    </div>
                    
                    <div class="team-card">
                        <div class="team-avatar">A</div>
                        <div class="team-name">Anik Ghosh</div>
                        <div class="team-role">App Design Lead</div>
                    </div>
                    
                    <div class="team-card">
                        <div class="team-avatar">P</div>
                        <div class="team-name">Parth Variya</div>
                        <div class="team-role">Content Strategist</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-navbar" id="bottom-navbar">
            <div class="nav-item active" data-screen="dashboard">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" data-screen="play-learn">
                <div class="nav-icon"><i class="fas fa-gamepad"></i></div>
                <div class="nav-label">Learn</div>
            </div>
            <div class="nav-item" data-screen="wallet">
                <div class="nav-icon"><i class="fas fa-wallet"></i></div>
                <div class="nav-label">Wallet</div>
            </div>
            <div class="nav-item" data-screen="news">
                <div class="nav-icon"><i class="fas fa-newspaper"></i></div>
                <div class="nav-label">News</div>
            </div>
            <div class="nav-item" data-screen="leaderboard">
                <div class="nav-icon"><i class="fas fa-trophy"></i></div>
                <div class="nav-label">Rank</div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAH6a-5noZFdYmrH73tmLmoQBowD_onxf4",
            authDomain: "wiselyfin.firebaseapp.com",
            projectId: "wiselyfin",
            storageBucket: "wiselyfin.firebasestorage.app",
            messagingSenderId: "335346931759",
            appId: "1:335346931759:web:e0b19a12ae792659a48eda",
            measurementId: "G-N5F3YH9024"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Current user data
        let currentUser = null;
        let userData = null;

        // DOM Elements
        const screens = document.querySelectorAll('.screen');
        const startScreen = document.getElementById('start-screen');
        const authScreen = document.getElementById('auth-screen');
        const dashboardScreen = document.getElementById('dashboard-screen');
        const getStartedBtn = document.getElementById('get-started-btn');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const loginError = document.getElementById('login-error');
        const signupError = document.getElementById('signup-error');
        const signupSuccess = document.getElementById('signup-success');
        const tabCards = document.querySelectorAll('.tab-card');
        const backBtns = document.querySelectorAll('.back-btn');
        const navItems = document.querySelectorAll('.nav-item');
        const bottomNavbar = document.getElementById('bottom-navbar');
        const playLearnTabs = document.querySelectorAll('.play-learn-tab');
        const subsections = document.querySelectorAll('.subsection');
        const logoutBtn = document.getElementById('logout-btn');
        const dashboardLogoutBtn = document.getElementById('dashboard-logout-btn');
        const forgotPasswordLink = document.getElementById('forgot-password-link');
        const themeToggle = document.getElementById('theme-toggle');
        const coursesContainer = document.getElementById('courses-container');
        const quizzesContainer = document.getElementById('quizzes-container');
        const newsContainer = document.getElementById('news-container');

        // Theme Management
        function initTheme() {
            const savedTheme = localStorage.getItem('wiselyfin-theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('wiselyfin-theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const icon = themeToggle.querySelector('i');
            if (theme === 'dark') {
                icon.className = 'fas fa-sun';
            } else {
                icon.className = 'fas fa-moon';
            }
        }

        // Show specific screen
        function showScreen(screenId) {
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            
            // Show/hide bottom navbar
            if (screenId === 'dashboard-screen' || (screenId.includes('-screen') && screenId !== 'start-screen' && screenId !== 'auth-screen')) {
                bottomNavbar.classList.add('visible');
            } else {
                bottomNavbar.classList.remove('visible');
            }
            
            // Update bottom nav active state
            if (screenId !== 'start-screen' && screenId !== 'auth-screen') {
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-screen') === screenId.replace('-screen', '')) {
                        item.classList.add('active');
                    }
                });
            }

            // Load data when screens are shown
            if (currentUser) {
                if (screenId === 'dashboard-screen') {
                    updateDashboard();
                } else if (screenId === 'play-learn-screen') {
                    loadCourses();
                    loadQuizzes();
                } else if (screenId === 'wallet-screen') {
                    updateWallet();
                } else if (screenId === 'news-screen') {
                    loadNews();
                } else if (screenId === 'profile-screen') {
                    updateProfile();
                } else if (screenId === 'leaderboard-screen') {
                    updateLeaderboard();
                }
            }
        }

        // Update dashboard with user data
        function updateDashboard() {
            document.getElementById('user-greeting').textContent = `Hi ${userData.name} üëã`;
        }

        // Update wallet with user data
        function updateWallet() {
            document.getElementById('user-balance').textContent = userData.fincoins || 0;
            
            const transactionHistory = document.getElementById('transaction-history');
            transactionHistory.innerHTML = '';
            
            if (userData.transactions && userData.transactions.length > 0) {
                userData.transactions.forEach(transaction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${new Date(transaction.date).toLocaleDateString()}</td>
                        <td>${new Date(transaction.date).toLocaleTimeString()}</td>
                        <td>${transaction.task}</td>
                        <td class="coin-earned">+${transaction.coins}</td>
                    `;
                    transactionHistory.appendChild(row);
                });
            } else {
                transactionHistory.innerHTML = '<tr><td colspan="4" style="text-align: center;">No transactions yet</td></tr>';
            }
        }

        // Update profile with user data
        function updateProfile() {
            document.getElementById('profile-avatar').textContent = userData.name.charAt(0);
            document.getElementById('profile-name').textContent = userData.name;
            document.getElementById('profile-role').textContent = userData.role === 'admin' ? 'Admin Member' : 'Member';
            
            document.getElementById('info-name').textContent = userData.name;
            document.getElementById('info-email').textContent = userData.email;
            document.getElementById('info-role').textContent = userData.role === 'admin' ? 'Administrator' : 'Standard User';
            document.getElementById('info-join').textContent = new Date(userData.joinDate).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            const coursesCompleted = userData.coursesCompleted ? userData.coursesCompleted.length : 0;
            const quizzesCompleted = userData.quizzesCompleted ? userData.quizzesCompleted.length : 0;
            
            document.getElementById('info-courses').textContent = coursesCompleted;
            document.getElementById('info-quizzes').textContent = quizzesCompleted;
            document.getElementById('info-streak').textContent = `${userData.streak || 0} days`;
            document.getElementById('info-coins').textContent = `${userData.fincoins || 0} ü™ô`;
            
            // Update badges
            const badgesContainer = document.getElementById('badges-container');
            badgesContainer.innerHTML = '';
            
            if (userData.fincoins >= 100) {
                badgesContainer.innerHTML += '<div class="badge">ü•á</div>';
            }
            if (coursesCompleted >= 2) {
                badgesContainer.innerHTML += '<div class="badge">üìö</div>';
            }
            if (quizzesCompleted >= 3) {
                badgesContainer.innerHTML += '<div class="badge">üß†</div>';
            }
            if (userData.role === 'admin') {
                badgesContainer.innerHTML += '<div class="badge">‚≠ê</div>';
            }
        }

        // Update leaderboard
        async function updateLeaderboard() {
            const leaderboardContainer = document.getElementById('leaderboard-container');
            leaderboardContainer.innerHTML = '<div style="text-align: center; padding: 20px;">Loading leaderboard...</div>';
            
            try {
                // Get all users sorted by fincoins
                const usersSnapshot = await db.collection('users')
                    .orderBy('fincoins', 'desc')
                    .limit(10)
                    .get();
                
                leaderboardContainer.innerHTML = '';
                
                if (usersSnapshot.empty) {
                    leaderboardContainer.innerHTML = '<div style="text-align: center; padding: 20px;">No users found</div>';
                    return;
                }
                
                let rank = 1;
                usersSnapshot.forEach(doc => {
                    const user = doc.data();
                    const rankClass = rank === 1 ? 'rank-1' : rank === 2 ? 'rank-2' : rank === 3 ? 'rank-3' : '';
                    
                    const card = document.createElement('div');
                    card.className = 'leaderboard-card';
                    card.innerHTML = `
                        <div class="rank ${rankClass}">${rank}</div>
                        <div class="user-info">
                            <div class="user-name">${user.name}</div>
                        </div>
                        <div class="user-coins">${user.fincoins || 0} ü™ô</div>
                    `;
                    leaderboardContainer.appendChild(card);
                    rank++;
                });
            } catch (error) {
                console.error('Error loading leaderboard:', error);
                leaderboardContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--error);">Error loading leaderboard</div>';
            }
        }

        // Load courses from Firestore
        async function loadCourses() {
            try {
                const coursesSnapshot = await db.collection('courses').get();
                coursesContainer.innerHTML = '';

                if (coursesSnapshot.empty) {
                    coursesContainer.innerHTML = '<div class="content-section"><p>No courses available at the moment.</p></div>';
                    return;
                }

                coursesSnapshot.forEach(doc => {
                    const course = doc.data();
                    const isCompleted = userData.coursesCompleted && userData.coursesCompleted.includes(course.id);
                    
                    const courseElement = document.createElement('div');
                    courseElement.className = 'content-section';
                    courseElement.innerHTML = `
                        ${course.content}
                        <button class="btn ${isCompleted ? 'btn-secondary' : 'btn-success'} mark-complete" 
                                data-course="${course.id}" data-coins="${course.coins}"
                                ${isCompleted ? 'disabled' : ''}>
                            ${isCompleted ? 'Completed ‚úì' : `Mark as Completed (+${course.coins} FinCoins)`}
                        </button>
                    `;
                    coursesContainer.appendChild(courseElement);
                });

                // Re-attach event listeners
                document.querySelectorAll('.mark-complete').forEach(btn => {
                    btn.addEventListener('click', handleCourseComplete);
                });
            } catch (error) {
                console.error('Error loading courses:', error);
                coursesContainer.innerHTML = '<div class="content-section"><p>Error loading courses. Please try again.</p></div>';
            }
        }

        // Load quizzes from Firestore
        async function loadQuizzes() {
            try {
                const quizzesSnapshot = await db.collection('quizzes').get();
                quizzesContainer.innerHTML = '';

                if (quizzesSnapshot.empty) {
                    quizzesContainer.innerHTML = '<div class="quiz-container"><p>No quizzes available at the moment.</p></div>';
                    return;
                }

                quizzesSnapshot.forEach(doc => {
                    const quiz = doc.data();
                    const isCompleted = userData.quizzesCompleted && userData.quizzesCompleted.includes(quiz.id);
                    
                    const quizElement = document.createElement('div');
                    quizElement.className = 'quiz-container';
                    quizElement.id = `quiz-${quiz.id}`;
                    quizElement.innerHTML = `
                        <div class="quiz-question">${quiz.question}</div>
                        <div class="quiz-options">
                            ${quiz.options.map((option, index) => `
                                <div class="quiz-option" data-index="${index}">${option}</div>
                            `).join('')}
                        </div>
                        <button class="btn submit-quiz" data-quiz="${quiz.id}" data-coins="${quiz.coins}"
                                ${isCompleted ? 'disabled' : ''}>
                            ${isCompleted ? 'Completed ‚úì' : 'Submit Answer'}
                        </button>
                        <div class="quiz-result"></div>
                    `;
                    quizzesContainer.appendChild(quizElement);
                });

                // Re-attach event listeners
                document.querySelectorAll('.quiz-option').forEach(option => {
                    option.addEventListener('click', handleQuizOptionSelect);
                });

                document.querySelectorAll('.submit-quiz').forEach(btn => {
                    btn.addEventListener('click', handleQuizSubmit);
                });
            } catch (error) {
                console.error('Error loading quizzes:', error);
                quizzesContainer.innerHTML = '<div class="quiz-container"><p>Error loading quizzes. Please try again.</p></div>';
            }
        }

        // Load news from Firestore
        async function loadNews() {
            try {
                const newsSnapshot = await db.collection('news').orderBy('date', 'desc').get();
                newsContainer.innerHTML = '';

                if (newsSnapshot.empty) {
                    newsContainer.innerHTML = '<div class="news-card"><p>No news available at the moment.</p></div>';
                    return;
                }

                newsSnapshot.forEach(doc => {
                    const newsItem = doc.data();
                    const newsElement = document.createElement('div');
                    newsElement.className = 'news-card';
                    newsElement.innerHTML = `
                        <div class="news-title">${newsItem.title}</div>
                        <div class="news-meta">
                            <span>${new Date(newsItem.date).toLocaleDateString()}</span>
                            <span>Source: ${newsItem.source}</span>
                        </div>
                        <div class="news-description">
                            ${newsItem.description}
                        </div>
                        <button class="btn read-more-btn" style="padding: 8px 16px; font-size: 0.9rem;">Read More</button>
                    `;
                    newsContainer.appendChild(newsElement);
                });
            } catch (error) {
                console.error('Error loading news:', error);
                newsContainer.innerHTML = '<div class="news-card"><p>Error loading news. Please try again.</p></div>';
            }
        }

        // Add coins to user
        async function addCoins(amount, task) {
            try {
                // Update local data
                userData.fincoins = (userData.fincoins || 0) + amount;
                
                // Add transaction
                if (!userData.transactions) {
                    userData.transactions = [];
                }
                
                const transaction = {
                    date: new Date().toISOString(),
                    task: task,
                    coins: amount
                };
                
                userData.transactions.unshift(transaction);
                
                // Update Firestore
                await db.collection('users').doc(currentUser.uid).update({
                    fincoins: userData.fincoins,
                    transactions: userData.transactions
                });
                
                // Update UI if on relevant screens
                if (document.getElementById('wallet-screen').classList.contains('active')) {
                    updateWallet();
                }
                
                if (document.getElementById('profile-screen').classList.contains('active')) {
                    updateProfile();
                }
                
                return true;
            } catch (error) {
                console.error('Error adding coins:', error);
                return false;
            }
        }

        // Mark course as completed
        async function completeCourse(courseId, coins) {
            try {
                if (!userData.coursesCompleted) {
                    userData.coursesCompleted = [];
                }
                
                // Check if already completed
                if (userData.coursesCompleted.includes(courseId)) {
                    return false;
                }
                
                // Add to completed courses
                userData.coursesCompleted.push(courseId);
                
                // Update Firestore
                await db.collection('users').doc(currentUser.uid).update({
                    coursesCompleted: userData.coursesCompleted
                });
                
                // Add coins
                await addCoins(coins, `Completed ${courseId.toUpperCase()} Course`);
                
                // Update profile
                updateProfile();
                
                return true;
            } catch (error) {
                console.error('Error completing course:', error);
                return false;
            }
        }

        // Complete quiz
        async function completeQuiz(quizId, coins) {
            try {
                if (!userData.quizzesCompleted) {
                    userData.quizzesCompleted = [];
                }
                
                // Check if already completed
                if (userData.quizzesCompleted.includes(quizId)) {
                    return false;
                }
                
                // Add to completed quizzes
                userData.quizzesCompleted.push(quizId);
                
                // Update Firestore
                await db.collection('users').doc(currentUser.uid).update({
                    quizzesCompleted: userData.quizzesCompleted
                });
                
                // Add coins
                await addCoins(coins, `Completed Quiz ${quizId}`);
                
                // Update profile
                updateProfile();
                
                return true;
            } catch (error) {
                console.error('Error completing quiz:', error);
                return false;
            }
        }

        // Event handlers
        function handleCourseComplete() {
            const courseId = this.getAttribute('data-course');
            const coins = parseInt(this.getAttribute('data-coins'));
            completeCourse(courseId, coins);
        }

        function handleQuizOptionSelect() {
            const parentQuiz = this.closest('.quiz-container');
            parentQuiz.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            this.classList.add('selected');
        }

        async function handleQuizSubmit() {
            const quizId = parseInt(this.getAttribute('data-quiz'));
            const coins = parseInt(this.getAttribute('data-coins'));
            const quizContainer = document.getElementById(`quiz-${quizId}`);
            const selectedOption = quizContainer.querySelector('.quiz-option.selected');
            const resultDiv = quizContainer.querySelector('.quiz-result');
            
            if (!selectedOption) {
                alert('Please select an answer!');
                return;
            }
            
            try {
                // Get the quiz data to check correct answer
                const quizDoc = await db.collection('quizzes').doc(quizId.toString()).get();
                const quiz = quizDoc.data();
                
                const isCorrect = parseInt(selectedOption.getAttribute('data-index')) === quiz.correctAnswer;
                
                if (isCorrect) {
                    resultDiv.textContent = 'Correct! Well done.';
                    resultDiv.className = 'quiz-result correct';
                    
                    const success = await completeQuiz(quizId, coins);
                    
                    if (success) {
                        this.disabled = true;
                        this.textContent = 'Completed ‚úì';
                    }
                } else {
                    resultDiv.textContent = 'Incorrect. Try again!';
                    resultDiv.className = 'quiz-result incorrect';
                }
                
                resultDiv.style.display = 'block';
            } catch (error) {
                console.error('Error submitting quiz:', error);
                resultDiv.textContent = 'Error submitting quiz. Please try again.';
                resultDiv.className = 'quiz-result incorrect';
                resultDiv.style.display = 'block';
            }
        }

        // Initialize default users in Firebase (run once)
        async function initializeDefaultUsers() {
            const defaultUsers = [
                { email: "harsheel@wiselyfin", password: "harsheel", name: "Harsheel", role: "admin" },
                { email: "parth@wiselyfin", password: "parth", name: "Parth", role: "admin" },
                { email: "anik@wiselyfin", password: "anik", name: "Anik", role: "admin" },
                { email: "user@wiselyfin", password: "user", name: "User", role: "user" }
            ];

            for (const user of defaultUsers) {
                try {
                    // Check if user already exists
                    const userCredential = await auth.createUserWithEmailAndPassword(user.email, user.password);
                    
                    // Create user document in Firestore
                    await db.collection('users').doc(userCredential.user.uid).set({
                        name: user.name,
                        email: user.email,
                        role: user.role,
                        fincoins: 0,
                        coursesCompleted: [],
                        quizzesCompleted: [],
                        transactions: [],
                        state: "",
                        age: "",
                        joinDate: new Date().toISOString(),
                        streak: 0
                    });
                    
                    console.log(`Created user: ${user.name}`);
                    
                    // Sign out the created user
                    await auth.signOut();
                } catch (error) {
                    if (error.code === 'auth/email-already-in-use') {
                        console.log(`User ${user.email} already exists`);
                    } else {
                        console.error('Error creating user:', error);
                    }
                }
            }
        }

        // Initialize default data in Firebase (run once)
        async function initializeDefaultData() {
            // Initialize quizzes
            const quizzes = [
                {
                    id: 1,
                    question: "What does UPI stand for in banking?",
                    options: [
                        "Unified Payments Interface",
                        "Universal Payment Integration", 
                        "United Payment Institution",
                        "Unified Personal Investment"
                    ],
                    correctAnswer: 0,
                    coins: 10,
                    category: "Digital Payments"
                },
                {
                    id: 2,
                    question: "Which of these is NOT a benefit of budgeting?",
                    options: [
                        "Helps achieve financial goals",
                        "Reduces financial stress",
                        "Guarantees wealth accumulation",
                        "Provides spending control"
                    ],
                    correctAnswer: 2,
                    coins: 10,
                    category: "Budgeting"
                },
                {
                    id: 3,
                    question: "According to the 50/30/20 rule, what percentage should go to savings?",
                    options: ["10%", "15%", "20%", "30%"],
                    correctAnswer: 2,
                    coins: 10,
                    category: "Budgeting"
                },
                {
                    id: 4,
                    question: "What is the most important practice for digital financial safety?",
                    options: [
                        "Using the same password for all accounts",
                        "Sharing passwords with family members",
                        "Enabling two-factor authentication",
                        "Using public Wi-Fi for transactions"
                    ],
                    correctAnswer: 2,
                    coins: 10,
                    category: "Security"
                }
            ];

            // Initialize courses
            const courses = [
                {
                    id: "upi",
                    title: "Understanding UPI",
                    description: "Learn about Unified Payments Interface and how it works",
                    content: `
                        <h2>Understanding UPI</h2>
                        <p>Unified Payments Interface (UPI) is an instant real-time payment system developed by National Payments Corporation of India (NPCI). The interface facilitates inter-bank peer-to-peer (P2P) and person-to-merchant (P2M) transactions.</p>
                        
                        <h3>How UPI Works</h3>
                        <p>UPI uses a single mobile application for accessing different bank accounts. It works by creating a unique Virtual Payment Address (VPA) for each user, eliminating the need to share bank details.</p>
                        
                        <h3>Key Benefits</h3>
                        <ul>
                            <li>Instant money transfer 24/7</li>
                            <li>Single mobile app for multiple bank accounts</li>
                            <li>No need to enter bank details</li>
                            <li>Secure with two-factor authentication</li>
                            <li>Supports both P2P and merchant payments</li>
                        </ul>
                    `,
                    coins: 5,
                    duration: "10 min",
                    category: "Digital Payments"
                },
                {
                    id: "budgeting",
                    title: "Budgeting Basics",
                    description: "Learn how to create and manage your personal budget",
                    content: `
                        <h2>Budgeting Basics</h2>
                        <p>Budgeting is the process of creating a plan to spend your money. This spending plan is called a budget. Creating this spending plan allows you to determine in advance whether you will have enough money to do the things you need to do or would like to do.</p>
                        
                        <h3>Steps to Create a Budget</h3>
                        <ol>
                            <li>Calculate your net income</li>
                            <li>Track your spending</li>
                            <li>Set realistic goals</li>
                            <li>Make a plan</li>
                            <li>Adjust your spending to stay on budget</li>
                            <li>Review your budget regularly</li>
                        </ol>
                        
                        <h3>50/30/20 Rule</h3>
                        <p>A popular budgeting method is the 50/30/20 rule:</p>
                        <ul>
                            <li><strong>50%</strong> for needs (rent, groceries, utilities)</li>
                            <li><strong>30%</strong> for wants (entertainment, dining out)</li>
                            <li><strong>20%</strong> for savings and debt repayment</li>
                        </ul>
                    `,
                    coins: 5,
                    duration: "15 min",
                    category: "Personal Finance"
                },
                {
                    id: "security",
                    title: "Digital Safety & Security",
                    description: "Protect your financial information online",
                    content: `
                        <h2>Digital Safety & Security</h2>
                        <p>In today's digital age, protecting your financial information online is crucial. Learn how to safeguard your accounts and personal data from cyber threats.</p>
                        
                        <h3>Essential Security Practices</h3>
                        <ul>
                            <li>Use strong, unique passwords for each account</li>
                            <li>Enable two-factor authentication</li>
                            <li>Be cautious of phishing emails and messages</li>
                            <li>Keep your software and apps updated</li>
                            <li>Use secure networks for financial transactions</li>
                        </ul>
                    `,
                    coins: 5,
                    duration: "12 min",
                    category: "Security"
                }
            ];

            // Initialize news
            const news = [
                {
                    id: 1,
                    title: "RBI Issues New Guidelines for Digital Lending",
                    description: "The Reserve Bank of India has issued comprehensive guidelines for digital lending to enhance transparency and customer protection.",
                    content: "The new framework mandates direct disbursement of loans to borrowers' accounts and prohibits automatic increase in credit limits.",
                    date: "2023-11-15",
                    source: "RBI",
                    category: "Regulation"
                },
                {
                    id: 2,
                    title: "UPI Transactions Cross 10 Billion Mark Monthly",
                    description: "Unified Payments Interface transactions have shown massive growth with 10 billion monthly transactions.",
                    content: "NPCI is planning to introduce new features including UPI Lite for smaller transactions and credit card linking.",
                    date: "2023-11-10",
                    source: "NPCI",
                    category: "Digital Payments"
                },
                {
                    id: 3,
                    title: "SEBI Simplifies KYC Process for Investors",
                    description: "The Securities and Exchange Board of India has simplified the KYC registration process.",
                    content: "The new system allows for instant in-person verification through video calls and reduces documentation requirements.",
                    date: "2023-11-05",
                    source: "SEBI",
                    category: "Investment"
                }
            ];

            try {
                // Add quizzes to Firestore
                for (const quiz of quizzes) {
                    await db.collection('quizzes').doc(quiz.id.toString()).set(quiz);
                }

                // Add courses to Firestore
                for (const course of courses) {
                    await db.collection('courses').doc(course.id).set(course);
                }

                // Add news to Firestore
                for (const newsItem of news) {
                    await db.collection('news').doc(newsItem.id.toString()).set(newsItem);
                }

                console.log('Default data initialized successfully');
            } catch (error) {
                console.error('Error initializing default data:', error);
            }
        }

        // Event Listeners
        getStartedBtn.addEventListener('click', () => {
            showScreen('auth-screen');
        });

        // Login with Firebase
        loginBtn.addEventListener('click', async () => {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (!email || !password) {
                loginError.textContent = 'Please enter both email and password.';
                loginError.style.display = 'block';
                return;
            }
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                
                // Get user data from Firestore
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                
                if (userDoc.exists) {
                    userData = userDoc.data();
                    showScreen('dashboard-screen');
                    loginError.style.display = 'none';
                } else {
                    loginError.textContent = 'User data not found. Please contact support.';
                    loginError.style.display = 'block';
                }
            } catch (error) {
                console.error('Login error:', error);
                if (error.code === 'auth/user-not-found') {
                    loginError.textContent = 'No account found with this email.';
                } else if (error.code === 'auth/wrong-password') {
                    loginError.textContent = 'Incorrect password. Please try again.';
                } else {
                    loginError.textContent = 'Login failed. Please try again.';
                }
                loginError.style.display = 'block';
            }
        });

        // Sign up with Firebase
        signupBtn.addEventListener('click', async () => {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirm = document.getElementById('signup-confirm').value;
            
            // Validation
            if (!name || !email || !password || !confirm) {
                signupError.textContent = 'All fields are required.';
                signupError.style.display = 'block';
                signupSuccess.style.display = 'none';
                return;
            }
            
            if (password !== confirm) {
                signupError.textContent = 'Passwords do not match.';
                signupError.style.display = 'block';
                signupSuccess.style.display = 'none';
                return;
            }
            
            if (password.length < 6) {
                signupError.textContent = 'Password should be at least 6 characters.';
                signupError.style.display = 'block';
                signupSuccess.style.display = 'none';
                return;
            }
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                
                // Create user document in Firestore
                await db.collection('users').doc(currentUser.uid).set({
                    name: name,
                    email: email,
                    role: 'user',
                    fincoins: 0,
                    coursesCompleted: [],
                    quizzesCompleted: [],
                    transactions: [],
                    state: "",
                    age: "",
                    joinDate: new Date().toISOString(),
                    streak: 0
                });
                
                // Get the created user data
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                userData = userDoc.data();
                
                signupError.style.display = 'none';
                signupSuccess.textContent = 'Account created successfully!';
                signupSuccess.style.display = 'block';
                
                // Switch to dashboard after a delay
                setTimeout(() => {
                    showScreen('dashboard-screen');
                }, 1500);
                
            } catch (error) {
                console.error('Signup error:', error);
                if (error.code === 'auth/email-already-in-use') {
                    signupError.textContent = 'An account with this email already exists.';
                } else if (error.code === 'auth/weak-password') {
                    signupError.textContent = 'Password is too weak.';
                } else {
                    signupError.textContent = 'Error creating account. Please try again.';
                }
                signupError.style.display = 'block';
                signupSuccess.style.display = 'none';
            }
        });

        // Forgot password
        forgotPasswordLink.addEventListener('click', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            
            if (!email) {
                alert('Please enter your email address to reset password.');
                return;
            }
            
            try {
                await auth.sendPasswordResetEmail(email);
                alert('Password reset email sent! Check your inbox.');
            } catch (error) {
                console.error('Password reset error:', error);
                alert('Error sending reset email. Please check your email address.');
            }
        });

        // Tab card clicks
        tabCards.forEach(card => {
            card.addEventListener('click', () => {
                const section = card.getAttribute('data-section');
                showScreen(`${section}-screen`);
            });
        });

        // Back button clicks
        backBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                showScreen('dashboard-screen');
            });
        });

        // Bottom nav clicks
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const screen = item.getAttribute('data-screen');
                showScreen(`${screen}-screen`);
            });
        });

        // Logout
        logoutBtn.addEventListener('click', async () => {
            try {
                await auth.signOut();
                currentUser = null;
                userData = null;
                showScreen('start-screen');
                
                // Clear form fields
                document.getElementById('login-email').value = '';
                document.getElementById('login-password').value = '';
                document.getElementById('signup-name').value = '';
                document.getElementById('signup-email').value = '';
                document.getElementById('signup-password').value = '';
                document.getElementById('signup-confirm').value = '';
            } catch (error) {
                console.error('Logout error:', error);
            }
        });

        dashboardLogoutBtn.addEventListener('click', async () => {
            try {
                await auth.signOut();
                currentUser = null;
                userData = null;
                showScreen('start-screen');
            } catch (error) {
                console.error('Logout error:', error);
            }
        });

        // Auth state observer
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                // User is signed in
                currentUser = user;
                
                try {
                    // Get user data from Firestore
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    
                    if (userDoc.exists) {
                        userData = userDoc.data();
                        
                        // If on auth screen, redirect to dashboard
                        if (authScreen.classList.contains('active')) {
                            showScreen('dashboard-screen');
                        }
                    } else {
                        console.error('User document not found');
                        await auth.signOut();
                    }
                } catch (error) {
                    console.error('Error getting user data:', error);
                }
            } else {
                // User is signed out
                currentUser = null;
                userData = null;
                
                // If not on start or auth screen, redirect to start
                if (!startScreen.classList.contains('active') && !authScreen.classList.contains('active')) {
                    showScreen('start-screen');
                }
            }
        });

        // Auth tabs
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.getAttribute('data-tab');
                
                authTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                authForms.forEach(form => {
                    form.classList.remove('active');
                    if (form.id === `${tabName}-form`) {
                        form.classList.add('active');
                    }
                });
                
                // Clear messages
                loginError.style.display = 'none';
                signupError.style.display = 'none';
                signupSuccess.style.display = 'none';
            });
        });

        // Play & Learn tabs
        playLearnTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const subsection = tab.getAttribute('data-subsection');
                
                playLearnTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                subsections.forEach(sub => {
                    sub.classList.remove('active');
                    if (sub.id === `${subsection}-subsection`) {
                        sub.classList.add('active');
                    }
                });
            });
        });

        // Initialize the app
        initTheme();
        
        // Uncomment the line below to initialize default data (run once)
        // initializeDefaultData();
        // initializeDefaultUsers();

        // Theme toggle event
        themeToggle.addEventListener('click', toggleTheme);

        // Add animation delays to tab cards
        tabCards.forEach((card, index) => {
            card.style.animationDelay = `${index * 0.1}s`;
        });

        console.log('WiselyFin app initialized successfully!');
    </script>
</body>
</html>
